import{n as S,b as yt,s as Oe,p as fe,m as he,c as bt,i as wt,I as _t,d as et,f as Et,w as Ds,H as Us,r as ae,g as Hs,j as vt,T as xt,k as Fs,S as J,_ as $s,W as ke,A as Tt,l as Ne,o as je,q as De,t as K,u as St,v as Ct,x as Gs,y as Vs,B as It,z as zs,U as Pt,C as j,D as O,E as Y,F as At,G as Rt,J as kt,K as Bt,L as Q,M as Be,N as F,O as ge,P as E,Q as Mt,R as Lt,V as X,h as qt,a as Ot,X as Z,Y as Nt,Z as Ue,$ as jt,a0 as A,a1 as Dt,a2 as V,a3 as C,a4 as Ut,a5 as Ht,a6 as Ft,a7 as Ws,a8 as Ks,a9 as $t,aa as Gt,ab as Vt,ac as Me,ad as zt,ae as Wt,af as Js,ag as Kt,ah as Jt,ai as D,aj as z,e as He,ak as Ys,al as Qs,am as Yt,an as Xs,ao as Zs,ap as en,aq as B,ar as Fe,as as tn,at as Qt,au as Xt,av as $e,aw as sn,ax as Zt,ay as es,az as ts,aA as ss,aB as nn,aC as an,aD as rn,aE as on,aF as cn,aG as un,aH as Ge,aI as ns,aJ as as,aK as rs,aL as dn,aM as pe,aN as os,aO as ln,aP as fn,aQ as hn,aR as is,aS as cs,aT as us,aU as Le,aV as Ve,aW as ds,aX as ls,aY as mn,aZ as gn,a_ as pn,a$ as yn,b0 as bn,b1 as wn,b2 as _n,b3 as En,b4 as vn,b5 as xn,b6 as Tn,b7 as Sn,b8 as Cn,b9 as In,ba as Pn,bb as An,bc as Rn,bd as kn,be as Bn,bf as Mn,bg as Ln,bh as qn,bi as On,bj as Nn,bk as jn,bl as Dn,bm as Un,bn as Hn,bo as Fn,bp as $n,bq as Gn,br as Vn,bs as zn,bt as Wn,bu as Kn,bv as Jn,bw as Yn,bx as Qn,by as Xn,bz as Zn,bA as ea,bB as ta,bC as sa,bD as na,bE as aa,bF as ra,bG as oa,bH as ia,bI as ca,bJ as ua,bK as da,bL as la,bM as fa,bN as ha,bO as ma,bP as ga,bQ as pa,bR as ya,bS as ba,bT as wa,bU as _a,bV as Ea,bW as va,bX as xa,bY as Ta,bZ as Sa,b_ as Ca,b$ as Ia,c0 as Pa,c1 as Aa,c2 as Ra,c3 as ka,c4 as Ba,c5 as Ma,c6 as La,c7 as qa,c8 as Oa,c9 as Na,ca as ja,cb as Da,cc as Ua,cd as Ha,ce as Fa,cf as $a,cg as Ga,ch as Va,ci as za,cj as Wa,ck as Ka,cl as Ja,cm as Ya,cn as Qa,co as Xa,cp as Za,cq as er,cr as tr,cs as sr,ct as nr,cu as ar,cv as rr,cw as or,cx as ir,cy as cr,cz as ur,cA as dr,cB as lr,cC as fr,cD as hr,cE as mr,cF as gr,cG as pr,cH as yr,cI as br,cJ as wr,cK as _r,cL as Er,cM as vr,cN as xr,cO as Tr,cP as Sr,cQ as Cr,cR as Ir,cS as Pr,cT as Ar,cU as Rr,cV as kr,cW as Br,cX as Mr,cY as Lr,cZ as qr,c_ as Or,c$ as Nr,d0 as jr,d1 as Dr,d2 as Ur,d3 as Hr,d4 as Fr,d5 as $r,d6 as Gr,d7 as Vr,d8 as zr,d9 as Wr,da as Kr,db as Jr,dc as Yr,dd as Qr,de as Xr,df as Zr,dg as eo,dh as to,di as so,dj as no,dk as tt,dl as re,dm as st,dn as ao,dp as ro,dq as oo,dr as io,ds as co,dt as uo,du as lo,dv as fo,dw as ho,dx as mo,dy as go,dz as po,dA as yo,dB as bo,dC as wo,dD as _o,dE as Eo,dF as vo,dG as xo,dH as To,dI as So,dJ as Co,dK as Io,dL as Po,dM as Ao,dN as Ro,dO as ko,dP as Bo,dQ as Mo,dR as Lo,dS as qo,dT as Oo,dU as No,dV as jo,dW as Do,dX as Uo,dY as Ho,dZ as Fo,d_ as $o,d$ as Go,e0 as Vo,e1 as zo,e2 as Wo,e3 as Ko,e4 as Jo,e5 as Yo,e6 as Qo,e7 as Xo,e8 as Zo,e9 as ei,ea as ti,eb as si,ec as ni,ed as ai,ee as ri,ef as oi,eg as ii,eh as ci,ei as ui,ej as di,ek as li,el as fi,em as hi,en as mi,eo as gi,ep as pi,eq as yi,er as bi,es as wi,et as _i,eu as Ei,ev as vi,ew as xi,ex as Ti,ey as Si,ez as Ci,eA as Ii,eB as Pi,eC as Ai,eD as Ri,eE as ki,eF as Bi,eG as Mi,eH as Li,eI as qi,eJ as Oi,eK as Ni,eL as ji,eM as Di,eN as Ui,eO as Hi,eP as Fi,eQ as $i,eR as Gi,eS as Vi,eT as zi,eU as Wi,eV as Ki,eW as Ji,eX as Yi,eY as Qi,eZ as Xi,e_ as Zi,e$ as ec,f0 as tc,f1 as sc,f2 as nc,f3 as ac,f4 as rc,f5 as oc,f6 as ic,f7 as cc,f8 as uc,f9 as dc,fa as lc,fb as fc,fc as hc,fd as mc,fe as nt,ff as gc,fg as pc,fh as yc,fi as bc,fj as wc,fk as at,fl as _c,fm as Ec,fn as vc,fo as xc,fp as Tc,fq as Sc,fr as Cc,fs as Ic,ft as Pc,fu as I,fv as Ac,fw as Rc,fx as kc}from"./index-WnC96TIC.js";import{d as Bc}from"./index-Cam_jl3d.js";import{ccipRequest as rt,offchainLookup as Mc,offchainLookupAbiItem as Lc,offchainLookupSignature as qc}from"./ccip-DTI3Ue6Y.js";function Oc(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const r=Object.getOwnPropertyDescriptor(s,a);r&&Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}async function Nc(e,{chain:t}){const{id:n,name:s,nativeCurrency:a,rpcUrls:r,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:S(n),chainName:s,nativeCurrency:a,rpcUrls:r.default.http,blockExplorerUrls:i?Object.values(i).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function jc(e,t){const{abi:n,args:s,bytecode:a,...r}=t,i=yt({abi:n,args:s,bytecode:a});return Oe(e,{...r,...r.authorizationList?{to:null}:{},data:i})}function Dc(e){let t;if(typeof e=="string")t=fe(e,{modifiers:he});else{const n=bt(e),s=e.length;for(let a=0;a<s;a++){const r=e[a];if(!wt(r)){t=fe(r,{modifiers:he,structs:n});break}}}if(!t)throw new _t({param:e});return t}function Uc(e){const t=[];if(typeof e=="string"){const n=et(e),s=n.length;for(let a=0;a<s;a++)t.push(fe(n[a],{modifiers:he}))}else{const n=bt(e),s=e.length;for(let a=0;a<s;a++){const r=e[a];if(wt(r))continue;const i=et(r),c=i.length;for(let u=0;u<c;u++)t.push(fe(i[u],{modifiers:he,structs:n}))}}if(t.length===0)throw new Et({params:e});return t}async function Hc(e){return e.request({method:`${e.mode}_dumpState`})}async function Fc(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function $c(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[S(t)]})}async function Gc(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function Vc(e,{blocks:t,interval:n}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:S(t)}]}):await e.request({method:`${e.mode}_mine`,params:[S(t),S(n||0)]})}const zc=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),fs=new Uint8Array(new Array(16).fill(0).map((e,t)=>t)),Wc=fs.map(e=>(9*e+5)%16);let ze=[fs],We=[Wc];for(let e=0;e<4;e++)for(let t of[ze,We])t.push(t[e].map(n=>zc[n]));const hs=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Kc=ze.map((e,t)=>e.map(n=>hs[t][n])),Jc=We.map((e,t)=>e.map(n=>hs[t][n])),Yc=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Qc=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function ot(e,t,n,s){return e===0?t^n^s:e===1?t&n|~t&s:e===2?(t|~n)^s:e===3?t&s|n&~s:t^(n|~s)}const oe=new Uint32Array(16);class Xc extends Us{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:s,h3:a,h4:r}=this;return[t,n,s,a,r]}set(t,n,s,a,r){this.h0=t|0,this.h1=n|0,this.h2=s|0,this.h3=a|0,this.h4=r|0}process(t,n){for(let d=0;d<16;d++,n+=4)oe[d]=t.getUint32(n,!0);let s=this.h0|0,a=s,r=this.h1|0,i=r,c=this.h2|0,u=c,o=this.h3|0,l=o,g=this.h4|0,h=g;for(let d=0;d<5;d++){const m=4-d,f=Yc[d],p=Qc[d],v=ze[d],b=We[d],x=Kc[d],T=Jc[d];for(let y=0;y<16;y++){const w=ae(s+ot(d,r,c,o)+oe[v[y]]+f,x[y])+g|0;s=g,g=o,o=ae(c,10)|0,c=r,r=w}for(let y=0;y<16;y++){const w=ae(a+ot(m,i,u,l)+oe[b[y]]+p,T[y])+h|0;a=h,h=l,l=ae(u,10)|0,u=i,i=w}}this.set(this.h1+c+l|0,this.h2+o+h|0,this.h3+g+a|0,this.h4+s+i|0,this.h0+r+u|0)}roundClean(){oe.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Zc=Ds(()=>new Xc);function eu({chains:e,id:t}){return e.find(n=>n.id===t)}const Ie=new Map;async function tu(e){const{getSocket:t,keepAlive:n=!0,key:s="socket",reconnect:a=!0,url:r}=e,{interval:i=3e4}=typeof n=="object"?n:{},{attempts:c=5,delay:u=2e3}=typeof a=="object"?a:{};let o=Ie.get(`${s}:${r}`);if(o)return o;let l=0;const{schedule:g}=Hs({id:`${s}:${r}`,fn:async()=>{const m=new Map,f=new Map;let p,v,b;async function x(){const T=await t({onClose(){var y,w;for(const _ of m.values())(y=_.onError)==null||y.call(_,new J({url:r}));for(const _ of f.values())(w=_.onError)==null||w.call(_,new J({url:r}));m.clear(),f.clear(),a&&l<c&&setTimeout(async()=>{l++,await x().catch(console.error)},u)},onError(y){var w,_;p=y;for(const P of m.values())(w=P.onError)==null||w.call(P,p);for(const P of f.values())(_=P.onError)==null||_.call(P,p);m.clear(),f.clear(),o==null||o.close(),a&&l<c&&setTimeout(async()=>{l++,await x().catch(console.error)},u)},onOpen(){p=void 0,l=0},onResponse(y){const w=y.method==="eth_subscription",_=w?y.params.subscription:y.id,P=w?f:m,L=P.get(_);L&&L.onResponse(y),w||P.delete(_)}});return v=T,n&&(b&&clearInterval(b),b=setInterval(()=>{var y;return(y=v.ping)==null?void 0:y.call(v)},i)),T}return await x(),p=void 0,o={close(){b&&clearInterval(b),v.close(),Ie.delete(`${s}:${r}`)},get socket(){return v},request({body:T,onError:y,onResponse:w}){p&&y&&y(p);const _=T.id??Fs.take(),P=L=>{var Ze;typeof L.id=="number"&&_!==L.id||(T.method==="eth_subscribe"&&typeof L.result=="string"&&f.set(L.result,{onResponse:P,onError:y}),T.method==="eth_unsubscribe"&&f.delete((Ze=T.params)==null?void 0:Ze[0]),w(L))};m.set(_,{onResponse:P,onError:y});try{v.request({body:{jsonrpc:"2.0",id:_,...T}})}catch(L){y==null||y(L)}},requestAsync({body:T,timeout:y=1e4}){return vt(()=>new Promise((w,_)=>this.request({body:T,onError:_,onResponse:w})),{errorInstance:new xt({body:T,url:r}),timeout:y})},requests:m,subscriptions:f,url:r},Ie.set(`${s}:${r}`,o),[o]}}),[h,[d]]=await g();return d}async function le(e,t={}){const{keepAlive:n,reconnect:s}=t;return tu({async getSocket({onClose:a,onError:r,onOpen:i,onResponse:c}){const u=await $s(()=>import("./native-CJ5et6AR.js"),[]).then(d=>d.WebSocket),o=new u(e);function l(){o.removeEventListener("close",l),o.removeEventListener("message",g),o.removeEventListener("error",r),o.removeEventListener("open",i),a()}function g({data:d}){try{const m=JSON.parse(d);c(m)}catch(m){r(m)}}o.addEventListener("close",l),o.addEventListener("message",g),o.addEventListener("error",r),o.addEventListener("open",i),o.readyState===u.CONNECTING&&await new Promise((d,m)=>{o&&(o.onopen=d,o.onerror=m)});const{close:h}=o;return Object.assign(o,{close(){h.bind(o)(),l()},ping(){try{if(o.readyState===o.CLOSED||o.readyState===o.CLOSING)throw new ke({url:o.url,cause:new J({url:o.url})});const d={jsonrpc:"2.0",method:"net_version",params:[]};o.send(JSON.stringify(d))}catch(d){r(d)}},request({body:d}){if(o.readyState===o.CLOSED||o.readyState===o.CLOSING)throw new ke({body:d,url:o.url,cause:new J({url:o.url})});return o.send(JSON.stringify(d))}})},keepAlive:n,reconnect:s,url:e})}async function su(e){const t=await le(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function nu(e,t){if(e.length!==t.length)throw new Tt({expectedLength:e.length,givenLength:t.length});const n=[];for(let s=0;s<e.length;s++){const a=e[s],r=t[s];n.push(ms(a,r))}return Ne(n)}function ms(e,t,n=!1){if(e==="address"){const i=t;if(!je(i))throw new De({address:i});return K(i.toLowerCase(),{size:n?32:null})}if(e==="string")return St(t);if(e==="bytes")return t;if(e==="bool")return K(Ct(t),{size:n?32:1});const s=e.match(Gs);if(s){const[i,c,u="256"]=s,o=Number.parseInt(u)/8;return S(t,{size:n?32:o,signed:c==="int"})}const a=e.match(Vs);if(a){const[i,c]=a;if(Number.parseInt(c)!==(t.length-2)/2)throw new It({expectedSize:Number.parseInt(c),givenSize:(t.length-2)/2});return K(t,{dir:"right",size:n?32:null})}const r=e.match(zs);if(r&&Array.isArray(t)){const[i,c]=r,u=[];for(let o=0;o<t.length;o++)u.push(ms(c,t[o],!0));return u.length===0?"0x":Ne(u)}throw new Pt(e)}function qe(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function au(e){return e.opcode==="CREATE2"?ps(e):gs(e)}function gs(e){const t=j(O(e.from));let n=j(e.nonce);return n[0]===0&&(n=new Uint8Array([])),O(`0x${Y(kt([t,n],"bytes")).slice(26)}`)}function ps(e){const t=j(O(e.from)),n=K(qe(e.salt)?e.salt:j(e.salt),{size:32}),s="bytecodeHash"in e?qe(e.bytecodeHash)?e.bytecodeHash:j(e.bytecodeHash):Y(e.bytecode,"bytes");return O(At(Y(Rt([j("0xff"),t,n,s])),12))}function Ke(e,t="hex"){const n=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new Bt(e);return Q(e)}return e})(),s=Be(n,{recursiveReadLimit:Number.POSITIVE_INFINITY});return ys(s,t)}function ys(e,t="hex"){if(e.bytes.length===0)return t==="hex"?F(e.bytes):e.bytes;const n=e.readByte();if(n<128&&e.decrementPosition(1),n<192){const a=it(e,n,128),r=e.readBytes(a);return t==="hex"?F(r):r}const s=it(e,n,192);return ru(e,s,t)}function it(e,t,n){if(n===128&&t<128)return 1;if(t<=n+55)return t-n;if(t===n+55+1)return e.readUint8();if(t===n+55+2)return e.readUint16();if(t===n+55+3)return e.readUint24();if(t===n+55+4)return e.readUint32();throw new ge("Invalid RLP prefix")}function ru(e,t,n){const s=e.position,a=[];for(;e.position-s<t;)a.push(ys(e,n));return a}function bs(e){return E(e)&&Mt(e)===32}function ou(e,t){const n=t||"hex",s=Zc(E(e,{strict:!1})?j(e):e);return n==="bytes"?s:Lt(s)}async function ws({message:e,signature:t}){return X({hash:qt(e),signature:t})}async function _s(e){const{domain:t,message:n,primaryType:s,signature:a,types:r}=e;return X({hash:Ot({domain:t,message:n,primaryType:s,types:r}),signature:a})}async function iu({address:e,hash:t,signature:n}){return Z(O(e),await X({hash:t,signature:n}))}async function cu({address:e,message:t,signature:n}){return Z(O(e),await ws({message:t,signature:n}))}async function uu(e){const{address:t,domain:n,message:s,primaryType:a,signature:r,types:i}=e;return Z(O(t),await _s({domain:n,message:s,primaryType:a,signature:r,types:i}))}function du(e){if(!Nt(e))return{signature:e};const[t,n,s]=Ue([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:n,signature:s}}function Es(e){const t=jt(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&A(t)>=192)return"legacy";throw new Dt({serializedType:t})}function vs(e){const t=Es(e);return t==="eip1559"?hu(e):t==="eip2930"?mu(e):t==="eip4844"?fu(e):t==="eip7702"?lu(e):gu(e)}function lu(e){const t=ye(e),[n,s,a,r,i,c,u,o,l,g,h,d,m]=t;if(t.length!==10&&t.length!==13)throw new V({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:a,maxFeePerGas:r,gas:i,to:c,value:u,data:o,accessList:l,authorizationList:g,...t.length>9?{v:h,r:d,s:m}:{}},serializedTransaction:e,type:"eip7702"});const f={chainId:A(n),type:"eip7702"};return E(c)&&c!=="0x"&&(f.to=c),E(i)&&i!=="0x"&&(f.gas=C(i)),E(o)&&o!=="0x"&&(f.data=o),E(s)&&s!=="0x"&&(f.nonce=A(s)),E(u)&&u!=="0x"&&(f.value=C(u)),E(r)&&r!=="0x"&&(f.maxFeePerGas=C(r)),E(a)&&a!=="0x"&&(f.maxPriorityFeePerGas=C(a)),l.length!==0&&l!=="0x"&&(f.accessList=be(l)),g.length!==0&&g!=="0x"&&(f.authorizationList=pu(g)),Ks(f),{...t.length===13?ee(t):void 0,...f}}function fu(e){const t=ye(e),n=t.length===4,s=n?t[0]:t,a=n?t.slice(1):[],[r,i,c,u,o,l,g,h,d,m,f,p,v,b]=s,[x,T,y]=a;if(!(s.length===11||s.length===14))throw new V({attributes:{chainId:r,nonce:i,maxPriorityFeePerGas:c,maxFeePerGas:u,gas:o,to:l,value:g,data:h,accessList:d,...s.length>9?{v:p,r:v,s:b}:{}},serializedTransaction:e,type:"eip4844"});const w={blobVersionedHashes:f,chainId:A(r),type:"eip4844"};return E(l)&&l!=="0x"&&(w.to=l),E(o)&&o!=="0x"&&(w.gas=C(o)),E(h)&&h!=="0x"&&(w.data=h),E(i)&&i!=="0x"&&(w.nonce=A(i)),E(g)&&g!=="0x"&&(w.value=C(g)),E(m)&&m!=="0x"&&(w.maxFeePerBlobGas=C(m)),E(u)&&u!=="0x"&&(w.maxFeePerGas=C(u)),E(c)&&c!=="0x"&&(w.maxPriorityFeePerGas=C(c)),d.length!==0&&d!=="0x"&&(w.accessList=be(d)),x&&T&&y&&(w.sidecars=Ft({blobs:x,commitments:T,proofs:y})),Ws(w),{...s.length===14?ee(s):void 0,...w}}function hu(e){const t=ye(e),[n,s,a,r,i,c,u,o,l,g,h,d]=t;if(!(t.length===9||t.length===12))throw new V({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:a,maxFeePerGas:r,gas:i,to:c,value:u,data:o,accessList:l,...t.length>9?{v:g,r:h,s:d}:{}},serializedTransaction:e,type:"eip1559"});const m={chainId:A(n),type:"eip1559"};return E(c)&&c!=="0x"&&(m.to=c),E(i)&&i!=="0x"&&(m.gas=C(i)),E(o)&&o!=="0x"&&(m.data=o),E(s)&&s!=="0x"&&(m.nonce=A(s)),E(u)&&u!=="0x"&&(m.value=C(u)),E(r)&&r!=="0x"&&(m.maxFeePerGas=C(r)),E(a)&&a!=="0x"&&(m.maxPriorityFeePerGas=C(a)),l.length!==0&&l!=="0x"&&(m.accessList=be(l)),Ut(m),{...t.length===12?ee(t):void 0,...m}}function mu(e){const t=ye(e),[n,s,a,r,i,c,u,o,l,g,h]=t;if(!(t.length===8||t.length===11))throw new V({attributes:{chainId:n,nonce:s,gasPrice:a,gas:r,to:i,value:c,data:u,accessList:o,...t.length>8?{v:l,r:g,s:h}:{}},serializedTransaction:e,type:"eip2930"});const d={chainId:A(n),type:"eip2930"};return E(i)&&i!=="0x"&&(d.to=i),E(r)&&r!=="0x"&&(d.gas=C(r)),E(u)&&u!=="0x"&&(d.data=u),E(s)&&s!=="0x"&&(d.nonce=A(s)),E(c)&&c!=="0x"&&(d.value=C(c)),E(a)&&a!=="0x"&&(d.gasPrice=C(a)),o.length!==0&&o!=="0x"&&(d.accessList=be(o)),Ht(d),{...t.length===11?ee(t):void 0,...d}}function gu(e){const t=Ke(e,"hex"),[n,s,a,r,i,c,u,o,l]=t;if(!(t.length===6||t.length===9))throw new V({attributes:{nonce:n,gasPrice:s,gas:a,to:r,value:i,data:c,...t.length>6?{v:u,r:o,s:l}:{}},serializedTransaction:e,type:"legacy"});const g={type:"legacy"};if(E(r)&&r!=="0x"&&(g.to=r),E(a)&&a!=="0x"&&(g.gas=C(a)),E(c)&&c!=="0x"&&(g.data=c),E(n)&&n!=="0x"&&(g.nonce=A(n)),E(i)&&i!=="0x"&&(g.value=C(i)),E(s)&&s!=="0x"&&(g.gasPrice=C(s)),$t(g),t.length===6)return g;const h=E(u)&&u!=="0x"?C(u):0n;if(l==="0x"&&o==="0x")return h>0&&(g.chainId=Number(h)),g;const d=h,m=Number((d-35n)/2n);if(m>0)g.chainId=m;else if(d!==27n&&d!==28n)throw new Gt({v:d});return g.v=d,g.s=l,g.r=o,g.yParity=d%2n===0n?1:0,g}function ye(e){return Ke(`0x${e.slice(4)}`,"hex")}function be(e){const t=[];for(let n=0;n<e.length;n++){const[s,a]=e[n];if(!je(s,{strict:!1}))throw new De({address:s});t.push({address:s,storageKeys:a.map(r=>bs(r)?r:Vt(r))})}return t}function pu(e){const t=[];for(let n=0;n<e.length;n++){const[s,a,r,i,c,u]=e[n];t.push({address:a,chainId:A(s),nonce:A(r),...ee([i,c,u])})}return t}function ee(e){const t=e.slice(-3),n=t[0]==="0x"||C(t[0])===0n?27n:28n;return{r:Me(t[1],{size:32}),s:Me(t[2],{size:32}),v:n,yParity:n===27n?0:1}}class xs extends ge{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Je(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new xs({value:e});let[n,s="0"]=e.split(".");const a=n.startsWith("-");if(a&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),t===0)Math.round(+`.${s}`)===1&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>t){const[r,i,c]=[s.slice(0,t-1),s.slice(t-1,t),s.slice(t)],u=Math.round(+`${i}.${c}`);u>9?s=`${BigInt(r)+BigInt(1)}0`.padStart(r.length+1,"0"):s=`${r}${u}`,s.length>t&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,t)}else s=s.padEnd(t,"0");return BigInt(`${a?"-":""}${n}${s}`)}function yu(e,t="wei"){return Je(e,zt[t])}function bu(e,t="wei"){return Je(e,Wt[t])}function Ts(e){const{source:t}=e,n=new Map,s=new Js(8192),a=new Map,r=({address:i,chainId:c})=>`${i}.${c}`;return{async consume({address:i,chainId:c,client:u}){const o=r({address:i,chainId:c}),l=this.get({address:i,chainId:c,client:u});this.increment({address:i,chainId:c});const g=await l;return await t.set({address:i,chainId:c},g),s.set(o,g),g},async increment({address:i,chainId:c}){const u=r({address:i,chainId:c}),o=n.get(u)??0;n.set(u,o+1)},async get({address:i,chainId:c,client:u}){const o=r({address:i,chainId:c});let l=a.get(o);return l||(l=(async()=>{try{const h=await t.get({address:i,chainId:c,client:u}),d=s.get(o)??0;return d>0&&h<=d?d+1:(s.delete(o),h)}finally{this.reset({address:i,chainId:c})}})(),a.set(o,l)),(n.get(o)??0)+await l},reset({address:i,chainId:c}){const u=r({address:i,chainId:c});n.delete(u),a.delete(u)}}}function wu(){return{async get(e){const{address:t,client:n}=e;return Kt(n,{address:t,blockTag:"pending"})},set(){}}}const _u=Ts({source:wu()});async function Eu(e){var n;return((n=e.account)==null?void 0:n.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(s=>Jt(s))}async function vu(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function xu(e,t={}){const{account:n=e.account,chainId:s}=t,a=n?D(n):void 0,r=s?[a==null?void 0:a.address,[S(s)]]:[a==null?void 0:a.address],i=await e.request({method:"wallet_getCapabilities",params:r}),c={};for(const[u,o]of Object.entries(i))c[Number(u)]=o;return typeof s=="number"?c[s]:c}async function Tu(e,t){const{account:n=e.account,chain:s=e.chain,forceAtomic:a=!1,id:r,version:i="2.0.0"}=t;if(typeof n>"u")throw new z({docsPath:"/docs/actions/wallet/sendCalls"});const c=n?D(n):null,u=t.calls.map(o=>{const l=o;return{data:l.abi?He({abi:l.abi,functionName:l.functionName,args:l.args}):l.data,to:l.to,value:l.value?S(l.value):void 0}});try{const o=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:u,capabilities:Su(t.capabilities),chainId:S(s.id),from:c==null?void 0:c.address,id:r,version:i}]},{retryCount:0});return typeof o=="string"?{id:o}:o}catch(o){throw Ys(o,{...t,account:c,chain:t.chain})}}function Su(e){const t=e!=null&&e.paymasterService?Object.entries(e.paymasterService).reduce((n,[s,a])=>({...n??{},[S(Number(s))]:a}),{}):void 0;return{...e,...t?{paymasterService:t}:{}}}async function Ss(e,t){const{atomic:n=!1,chainId:s,receipts:a,version:r="2.0.0",...i}=await e.request({method:"wallet_getCallsStatus",params:[t.id]}),[c,u]=(()=>{const o=i.status;return o>=100&&o<200?["pending",o]:o>=200&&o<300?["success",o]:o>=300&&o<700?["failure",o]:o==="CONFIRMED"?["success",200]:o==="PENDING"?["pending",100]:[void 0,o]})();return{...i,atomic:n,chainId:s?A(s):void 0,receipts:(a==null?void 0:a.map(o=>({...o,blockNumber:C(o.blockNumber),gasUsed:C(o.gasUsed),status:Qs[o.status]})))??[],statusCode:u,status:c,version:r}}async function Cu(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function Iu(e,t){const{id:n,pollingInterval:s=e.pollingInterval,status:a=({statusCode:h})=>h>=200,timeout:r=6e4}=t,i=Yt(["waitForCallsStatus",e.uid,n]),{promise:c,resolve:u,reject:o}=Xs();let l;const g=Zs(i,{resolve:u,reject:o},h=>{const d=en(async()=>{const m=f=>{clearTimeout(l),d(),f(),g()};try{const f=await Ss(e,{id:n});if(!a(f))return;m(()=>h.resolve(f))}catch(f){m(()=>h.reject(f))}},{interval:s,emitOnBegin:!0});return d});return l=r?setTimeout(()=>{g(),clearTimeout(l),o(new Cs({id:n}))},r):void 0,await c}class Cs extends ge{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function Pu(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>O(n))}async function Au(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function Ru(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function ku(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function Bu(e){return await e.request({method:"txpool_content"})}async function Mu(e){const{pending:t,queued:n}=await e.request({method:"txpool_status"});return{pending:A(t),queued:A(n)}}async function Lu(e){return await e.request({method:"txpool_inspect"})}async function qu(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function Ou(e,{blockNumber:t,jsonRpcUrl:n}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:n}}]})}async function Nu(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function Is(e,t){var u;const{account:n=e.account,chainId:s,nonce:a}=t;if(!n)throw new z({docsPath:"/docs/eip7702/prepareAuthorization"});const r=D(n),i=(()=>{if(t.executor)return t.executor==="self"?t.executor:D(t.executor)})(),c={address:t.contractAddress??t.address,chainId:s,nonce:a};return typeof c.chainId>"u"&&(c.chainId=((u=e.chain)==null?void 0:u.id)??await B(e,Fe,"getChainId")({})),typeof c.nonce>"u"&&(c.nonce=await B(e,Kt,"getTransactionCount")({address:r.address,blockTag:"pending"}),(i==="self"||i!=null&&i.address&&Z(i.address,r.address))&&(c.nonce+=1)),c}async function ju(e,t){const{account:n=e.account}=t;if(!n)throw new z({docsPath:"/docs/eip7702/signAuthorization"});const s=D(n);if(!s.signAuthorization)throw new tn({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:s.type});const a=await Is(e,t);return s.signAuthorization(a)}async function Du(e,t){var o,l,g,h;const{account:n=e.account,chain:s=e.chain,...a}=t;if(!n)throw new z({docsPath:"/docs/actions/wallet/signTransaction"});const r=D(n);Qt({account:r,...t});const i=await B(e,Fe,"getChainId")({});s!==null&&Xt({currentChainId:i,chain:s});const c=(s==null?void 0:s.formatters)||((o=e.chain)==null?void 0:o.formatters),u=((l=c==null?void 0:c.transactionRequest)==null?void 0:l.format)||$e;return r.signTransaction?r.signTransaction({...a,chainId:i},{serializer:(h=(g=e.chain)==null?void 0:g.serializers)==null?void 0:h.transaction}):await e.request({method:"eth_signTransaction",params:[{...u(a),chainId:S(i),from:r.address}]},{retryCount:0})}async function Uu(e,t){var v,b,x;const{accessList:n,data:s,from:a,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:o,to:l,value:g,...h}=t,d=(x=(b=(v=e.chain)==null?void 0:v.formatters)==null?void 0:b.transactionRequest)==null?void 0:x.format,f=(d||$e)({...sn(h,{format:d}),accessList:n,data:s,from:a,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:o,to:l,value:g});return await e.request({method:"eth_sendUnsignedTransaction",params:[f]})}async function Hu(e,{address:t,value:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,S(n)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,S(n)]})}async function Fu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function $u(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[S(t)]})}async function Gu(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[n]})}async function Vu(e,{address:t,bytecode:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,n]}):await e.request({method:`${e.mode}_setCode`,params:[t,n]})}async function zu(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function Wu(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[n]})}async function Ku(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function Ju(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[S(t)]})}async function Yu(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[S(t)]})}async function Qu(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[S(t)]})}async function Xu(e,{address:t,nonce:n}){await e.request({method:`${e.mode}_setNonce`,params:[t,S(n)]})}async function Zu(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function ed(e,{address:t,index:n,value:s}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof n=="number"?S(n):n,s]})}async function td(e){return await e.request({method:"evm_snapshot"})}async function sd(e,t){const{account:n=e.account,domain:s,message:a,primaryType:r}=t;if(!n)throw new z({docsPath:"/docs/actions/wallet/signTypedData"});const i=D(n),c={EIP712Domain:Zt({domain:s}),...t.types};if(es({domain:s,message:a,primaryType:r,types:c}),i.signTypedData)return i.signTypedData({domain:s,message:a,primaryType:r,types:c});const u=ts({domain:s,message:a,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[i.address,u]},{retryCount:0})}async function nd(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}async function ad(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:S(t)}]},{retryCount:0})}async function rd(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function Ps(e,t){const{abi:n,account:s=e.account,address:a,args:r,dataSuffix:i,functionName:c,...u}=t;if(typeof s>"u")throw new z({docsPath:"/docs/contract/writeContract"});const o=s?D(s):null,l=He({abi:n,args:r,functionName:c});try{return await B(e,Oe,"sendTransaction")({data:`${l}${i?i.replace("0x",""):""}`,to:a,account:o,...u})}catch(g){throw ss(g,{abi:n,address:a,args:r,docsPath:"/docs/contract/writeContract",functionName:c,sender:o==null?void 0:o.address})}}function od({abi:e,address:t,client:n}){const s=n,[a,r]=s?"public"in s&&"wallet"in s?[s.public,s.wallet]:"public"in s?[s.public,void 0]:"wallet"in s?[void 0,s.wallet]:[s,s]:[void 0,void 0],i=a!=null,c=r!=null,u={};let o=!1,l=!1,g=!1;for(const h of e)if(h.type==="function"?h.stateMutability==="view"||h.stateMutability==="pure"?o=!0:l=!0:h.type==="event"&&(g=!0),o&&l&&g)break;return i&&(o&&(u.read=new Proxy({},{get(h,d){return(...m)=>{const{args:f,options:p}=ie(m);return B(a,nn,"readContract")({abi:e,address:t,functionName:d,args:f,...p})}}})),l&&(u.simulate=new Proxy({},{get(h,d){return(...m)=>{const{args:f,options:p}=ie(m);return B(a,an,"simulateContract")({abi:e,address:t,functionName:d,args:f,...p})}}})),g&&(u.createEventFilter=new Proxy({},{get(h,d){return(...m)=>{const f=e.find(b=>b.type==="event"&&b.name===d),{args:p,options:v}=Pe(m,f);return B(a,rn,"createContractEventFilter")({abi:e,address:t,eventName:d,args:p,...v})}}}),u.getEvents=new Proxy({},{get(h,d){return(...m)=>{const f=e.find(b=>b.type==="event"&&b.name===d),{args:p,options:v}=Pe(m,f);return B(a,on,"getContractEvents")({abi:e,address:t,eventName:d,args:p,...v})}}}),u.watchEvent=new Proxy({},{get(h,d){return(...m)=>{const f=e.find(b=>b.type==="event"&&b.name===d),{args:p,options:v}=Pe(m,f);return B(a,cn,"watchContractEvent")({abi:e,address:t,eventName:d,args:p,...v})}}}))),c&&l&&(u.write=new Proxy({},{get(h,d){return(...m)=>{const{args:f,options:p}=ie(m);return B(r,Ps,"writeContract")({abi:e,address:t,functionName:d,args:f,...p})}}})),(i||c)&&l&&(u.estimateGas=new Proxy({},{get(h,d){return(...m)=>{const{args:f,options:p}=ie(m);return B(a??r,un,"estimateContractGas")({abi:e,address:t,functionName:d,args:f,...p,account:p.account??r.account})}}})),u.address=t,u.abi=e,u}function ie(e){const t=e.length&&Array.isArray(e[0]),n=t?e[0]:[],s=(t?e[1]:e[0])??{};return{args:n,options:s}}function Pe(e,t){let n=!1;Array.isArray(e[0])?n=!0:e.length===1?n=t.inputs.some(r=>r.indexed):e.length===2&&(n=!0);const s=n?e[0]:void 0,a=(n?e[1]:e[0])??{};return{args:s,options:a}}function id(e,t={}){const{key:n="fallback",name:s="Fallback",rank:a=!1,shouldThrow:r=As,retryCount:i,retryDelay:c}=t;return({chain:u,pollingInterval:o=4e3,timeout:l,...g})=>{let h=e,d=()=>{};const m=Ge({key:n,name:s,async request({method:f,params:p}){let v;const b=async(x=0)=>{const T=h[x]({...g,chain:u,retryCount:0,timeout:l});try{const y=await T.request({method:f,params:p});return d({method:f,params:p,response:y,transport:T,status:"success"}),y}catch(y){if(d({error:y,method:f,params:p,transport:T,status:"error"}),r(y)||x===h.length-1||(v??(v=h.slice(x+1).some(w=>{const{include:_,exclude:P}=w({chain:u}).config.methods||{};return _?_.includes(f):P?!P.includes(f):!0})),!v))throw y;return b(x+1)}};return b()},retryCount:i,retryDelay:c,type:"fallback"},{onResponse:f=>d=f,transports:h.map(f=>f({chain:u,retryCount:0}))});if(a){const f=typeof a=="object"?a:{};cd({chain:u,interval:f.interval??o,onTransports:p=>h=p,ping:f.ping,sampleCount:f.sampleCount,timeout:f.timeout,transports:h,weights:f.weights})}return m}}function As(e){return!!("code"in e&&typeof e.code=="number"&&(e.code===ns.code||e.code===as.code||rs.nodeMessage.test(e.message)||e.code===5e3))}function cd({chain:e,interval:t=4e3,onTransports:n,ping:s,sampleCount:a=10,timeout:r=1e3,transports:i,weights:c={}}){const{stability:u=.7,latency:o=.3}=c,l=[],g=async()=>{const h=await Promise.all(i.map(async f=>{const p=f({chain:e,retryCount:0,timeout:r}),v=Date.now();let b,x;try{await(s?s({transport:p}):p.request({method:"net_listening"})),x=1}catch{x=0}finally{b=Date.now()}return{latency:b-v,success:x}}));l.push(h),l.length>a&&l.shift();const d=Math.max(...l.map(f=>Math.max(...f.map(({latency:p})=>p)))),m=i.map((f,p)=>{const v=l.map(w=>w[p].latency),x=1-v.reduce((w,_)=>w+_,0)/v.length/d,T=l.map(w=>w[p].success),y=T.reduce((w,_)=>w+_,0)/T.length;return y===0?[0,p]:[o*x+u*y,p]}).sort((f,p)=>p[0]-f[0]);n(m.map(([,f])=>i[f])),await dn(t),g()};g()}function ud(e){const{key:t="public",name:n="Public Client"}=e;return pe({...e,key:t,name:n,type:"publicClient"}).extend(os)}function Rs({mode:e}){return t=>{const n=t.extend(()=>({mode:e}));return{dropTransaction:s=>Ru(n,s),dumpState:()=>Hc(n),getAutomine:()=>ku(n),getTxpoolContent:()=>Bu(n),getTxpoolStatus:()=>Mu(n),impersonateAccount:s=>Fc(n,s),increaseTime:s=>$c(n,s),inspectTxpool:()=>Lu(n),loadState:s=>Gc(n,s),mine:s=>Vc(n,s),removeBlockTimestampInterval:()=>qu(n),reset:s=>Ou(n,s),revert:s=>Nu(n,s),sendUnsignedTransaction:s=>Uu(n,s),setAutomine:s=>Fu(n,s),setBalance:s=>Hu(n,s),setBlockGasLimit:s=>$u(n,s),setBlockTimestampInterval:s=>Gu(n,s),setCode:s=>Vu(n,s),setCoinbase:s=>zu(n,s),setIntervalMining:s=>Wu(n,s),setLoggingEnabled:s=>Ku(n,s),setMinGasPrice:s=>Ju(n,s),setNextBlockBaseFeePerGas:s=>Yu(n,s),setNextBlockTimestamp:s=>Qu(n,s),setNonce:s=>Xu(n,s),setRpcUrl:s=>Zu(n,s),setStorageAt:s=>ed(n,s),snapshot:()=>td(n),stopImpersonatingAccount:s=>nd(n,s)}}}function dd(e){const{key:t="test",name:n="Test Client",mode:s}=e;return pe({...e,key:t,name:n,type:"testClient"}).extend(r=>({mode:s,...Rs({mode:s})(r)}))}function ks(e){return{addChain:t=>Nc(e,t),deployContract:t=>jc(e,t),getAddresses:()=>Eu(e),getCallsStatus:t=>Ss(e,t),getCapabilities:t=>xu(e,t),getChainId:()=>Fe(e),getPermissions:()=>vu(e),prepareAuthorization:t=>Is(e,t),prepareTransactionRequest:t=>hn(e,t),requestAddresses:()=>Pu(e),requestPermissions:t=>Au(e,t),sendCalls:t=>Tu(e,t),sendRawTransaction:t=>fn(e,t),sendTransaction:t=>Oe(e,t),showCallsStatus:t=>Cu(e,t),signAuthorization:t=>ju(e,t),signMessage:t=>ln(e,t),signTransaction:t=>Du(e,t),signTypedData:t=>sd(e,t),switchChain:t=>ad(e,t),waitForCallsStatus:t=>Iu(e,t),watchAsset:t=>rd(e,t),writeContract:t=>Ps(e,t)}}function ld(e){const{key:t="wallet",name:n="Wallet Client",transport:s}=e;return pe({...e,key:t,name:n,transport:s,type:"walletClient"}).extend(ks)}function fd(e,t={}){const{keepAlive:n,key:s="webSocket",methods:a,name:r="WebSocket JSON-RPC",reconnect:i,retryDelay:c}=t;return({chain:u,retryCount:o,timeout:l})=>{var f;const g=t.retryCount??o,h=l??t.timeout??1e4,d=e||((f=u==null?void 0:u.rpcUrls.default.webSocket)==null?void 0:f[0]),m={keepAlive:n,reconnect:i};if(!d)throw new is;return Ge({key:s,methods:a,name:r,async request({method:p,params:v}){const b={method:p,params:v},x=await le(d,m),{error:T,result:y}=await x.requestAsync({body:b,timeout:h});if(T)throw new cs({body:b,error:T,url:d});return y},retryCount:g,retryDelay:c,timeout:h,type:"webSocket"},{getSocket(){return su(d)},getRpcClient(){return le(d,m)},async subscribe({params:p,onData:v,onError:b}){const x=await le(d,m),{result:T}=await new Promise((y,w)=>x.request({body:{method:"eth_subscribe",params:p},onError(_){w(_),b==null||b(_)},onResponse(_){if(_.error){w(_.error),b==null||b(_.error);return}if(typeof _.id=="number"){y(_);return}_.method==="eth_subscription"&&v(_.params)}}));return{subscriptionId:T,async unsubscribe(){return new Promise(y=>x.request({body:{method:"eth_unsubscribe",params:[T]},onResponse:y}))}}}})}}class hd extends Error{constructor(t,n){super(n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=n}}const Ae="/docs/contract/decodeDeployData";function md(e){const{abi:t,bytecode:n,data:s}=e;if(s===n)return{bytecode:n};const a=t.find(i=>"type"in i&&i.type==="constructor");if(!a)throw new us({docsPath:Ae});if(!("inputs"in a))throw new Le({docsPath:Ae});if(!a.inputs||a.inputs.length===0)throw new Le({docsPath:Ae});return{args:Ue(a.inputs,`0x${s.replace(n,"")}`),bytecode:n}}function gd({r:e,yParityAndS:t}){const n=Q(t),s=n[0]&128?1:0,a=n;return s===1&&(a[0]&=127),{r:e,s:F(a),yParity:s}}function ct(e){const{r:t,s:n}=Ve.Signature.fromCompact(e.slice(2,130));return{r:S(t,{size:32}),yParityAndS:S(n,{size:32})}}function ut(e){const{r:t,s:n}=Ve.Signature.fromCompact(e.slice(2,130)),s=+`0x${e.slice(130)}`,[a,r]=(()=>{if(s===0||s===1)return[void 0,s];if(s===27)return[BigInt(s),0];if(s===28)return[BigInt(s),1];throw new Error("Invalid yParityOrV value")})();return typeof a<"u"?{r:S(t,{size:32}),s:S(n,{size:32}),v:a,yParity:r}:{r:S(t,{size:32}),s:S(n,{size:32}),yParity:r}}async function pd(e){const{serializedTransaction:t,signature:n}=e,s=vs(t),a=n??{r:s.r,s:s.s,v:s.v,yParity:s.yParity},r=ds({...s,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await X({hash:Y(r),signature:a})}function yd(e){const{r:t,s:n,v:s,yParity:a}=e,r=Number(a??s-27n);let i=n;if(r===1){const c=Q(n);c[0]|=128,i=F(c)}return{r:t,yParityAndS:i}}function dt({r:e,yParityAndS:t}){return`0x${new Ve.Signature(C(e),C(t)).toCompactHex()}`}function bd(e){const{sidecars:t,version:n}=e,s=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),a=[];for(const{commitment:r}of t)a.push(ls({commitment:r,to:s,version:n}));return a}function wd(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),n=typeof e.blobs[0]=="string"?e.blobs.map(c=>Q(c)):e.blobs,s=n.reduce((c,u)=>c+u.length,0),a=Be(new Uint8Array(s));let r=!0;for(const c of n){const u=Be(c);for(;r&&u.position<c.length;){u.incrementPosition(1);let o=31;c.length-u.position<31&&(o=c.length-u.position);for(const l in Array.from({length:o})){const g=u.readByte();if(g===128&&!u.inspectBytes(u.remaining).includes(128)){r=!1;break}a.pushByte(g)}}}const i=a.bytes.slice(0,a.position);return t==="hex"?F(i):i}function Bs({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function _d(e,t){try{e.loadTrustedSetup(t)}catch(n){const s=n;if(!s.message.includes("trusted setup is already loaded"))throw s}return Bs(e)}const Ed=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:us,AbiConstructorParamsNotFoundError:Le,AbiDecodingDataSizeInvalidError:mn,AbiDecodingDataSizeTooSmallError:gn,AbiDecodingZeroDataError:pn,AbiEncodingArrayLengthMismatchError:yn,AbiEncodingBytesSizeMismatchError:bn,AbiEncodingLengthMismatchError:Tt,AbiErrorInputsNotFoundError:wn,AbiErrorNotFoundError:_n,AbiErrorSignatureNotFoundError:En,AbiEventNotFoundError:vn,AbiEventSignatureEmptyTopicsError:xn,AbiEventSignatureNotFoundError:Tn,AbiFunctionNotFoundError:Sn,AbiFunctionOutputsNotFoundError:Cn,AbiFunctionSignatureNotFoundError:In,AccountStateConflictError:Pn,AtomicReadyWalletRejectedUpgradeError:An,AtomicityNotSupportedError:Rn,BaseError:ge,BaseFeeScalarError:kn,BlockNotFoundError:Bn,BundleTooLargeError:Mn,BytesSizeMismatchError:It,CallExecutionError:Ln,ChainDisconnectedError:qn,ChainDoesNotSupportContract:On,ChainMismatchError:Nn,ChainNotFoundError:jn,CircularReferenceError:Dn,ClientChainNotConfiguredError:Un,ContractFunctionExecutionError:Hn,ContractFunctionRevertedError:Fn,ContractFunctionZeroDataError:$n,CounterfactualDeploymentFailedError:Gn,DecodeLogDataMismatch:Vn,DecodeLogTopicsMismatch:zn,DuplicateIdError:Wn,EIP1193ProviderRpcError:hd,Eip1559FeesNotSupportedError:Kn,EnsAvatarInvalidNftUriError:Jn,EnsAvatarUnsupportedNamespaceError:Yn,EnsAvatarUriResolutionError:Qn,EstimateGasExecutionError:Xn,ExecutionRevertedError:rs,FeeCapTooHighError:Zn,FeeCapTooLowError:ea,FeeConflictError:ta,FilterTypeNotSupportedError:sa,HttpRequestError:na,InsufficientFundsError:aa,IntegerOutOfRangeError:ra,InternalRpcError:oa,IntrinsicGasTooHighError:ia,IntrinsicGasTooLowError:ca,InvalidAbiDecodingTypeError:ua,InvalidAbiEncodingTypeError:da,InvalidAbiItemError:la,InvalidAbiParameterError:_t,InvalidAbiParametersError:Et,InvalidAbiTypeParameterError:fa,InvalidAddressError:De,InvalidArrayError:ha,InvalidBytesBooleanError:ma,InvalidChainIdError:ga,InvalidDecimalNumberError:xs,InvalidDefinitionTypeError:pa,InvalidDomainError:ya,InvalidFunctionModifierError:ba,InvalidHexBooleanError:wa,InvalidHexValueError:Bt,InvalidInputRpcError:_a,InvalidLegacyVError:Gt,InvalidModifierError:Ea,InvalidParameterError:va,InvalidParamsRpcError:xa,InvalidParenthesisError:Ta,InvalidPrimaryTypeError:Sa,InvalidRequestRpcError:Ca,InvalidSerializableTransactionError:Ia,InvalidSerializedTransactionError:V,InvalidSerializedTransactionTypeError:Dt,InvalidSignatureError:Pa,InvalidStorageKeySizeError:Aa,InvalidStructSignatureError:Ra,InvalidStructTypeError:ka,JsonRpcVersionUnsupportedError:Ba,LimitExceededRpcError:Ma,MaxFeePerGasTooLowError:La,MethodNotFoundRpcError:qa,MethodNotSupportedRpcError:Oa,NonceMaxValueError:Na,NonceTooHighError:ja,NonceTooLowError:Da,ParseRpcError:Ua,ProviderDisconnectedError:Ha,ProviderRpcError:Fa,RawContractError:$a,ResourceNotFoundRpcError:Ga,ResourceUnavailableRpcError:Va,RpcError:za,RpcRequestError:cs,SizeExceedsPaddingSizeError:Wa,SizeOverflowError:Ka,SliceOffsetOutOfBoundsError:Ja,SocketClosedError:J,SolidityProtectedKeywordError:Ya,StateAssignmentConflictError:Qa,SwitchChainError:Xa,TimeoutError:xt,TipAboveFeeCapError:Za,TransactionExecutionError:er,TransactionNotFoundError:tr,TransactionReceiptNotFoundError:sr,TransactionRejectedRpcError:ns,TransactionTypeNotSupportedError:nr,UnauthorizedProviderError:ar,UnknownBundleIdError:rr,UnknownNodeError:or,UnknownRpcError:ir,UnknownSignatureError:cr,UnknownTypeError:ur,UnsupportedChainIdError:dr,UnsupportedNonOptionalCapabilityError:lr,UnsupportedPackedAbiType:Pt,UnsupportedProviderMethodError:fr,UrlRequiredError:is,UserRejectedRequestError:as,WaitForCallsStatusTimeoutError:Cs,WaitForTransactionReceiptTimeoutError:hr,WebSocketRequestError:ke,assertCurrentChain:Xt,assertRequest:Qt,assertTransactionEIP1559:Ut,assertTransactionEIP2930:Ht,assertTransactionLegacy:$t,blobsToCommitments:mr,blobsToProofs:gr,boolToBytes:pr,boolToHex:Ct,bytesToBigInt:yr,bytesToBool:br,bytesToHex:F,bytesToNumber:wr,bytesToRlp:_r,bytesToString:Er,ccipFetch:rt,ccipRequest:rt,checksumAddress:Jt,commitmentToVersionedHash:ls,commitmentsToVersionedHashes:vr,compactSignatureToHex:dt,compactSignatureToSignature:gd,concat:Rt,concatBytes:xr,concatHex:Ne,createClient:pe,createNonceManager:Ts,createPublicClient:ud,createTestClient:dd,createTransport:Ge,createWalletClient:ld,custom:Tr,decodeAbiParameters:Ue,decodeDeployData:md,decodeErrorResult:Sr,decodeEventLog:Cr,decodeFunctionData:Ir,decodeFunctionResult:Pr,defineBlock:Ar,defineChain:Rr,defineKzg:Bs,defineTransaction:kr,defineTransactionReceipt:Br,defineTransactionRequest:Mr,deploylessCallViaBytecodeBytecode:Lr,deploylessCallViaFactoryBytecode:qr,domainSeparator:Or,encodeAbiParameters:Nr,encodeDeployData:yt,encodeErrorResult:jr,encodeEventTopics:Dr,encodeFunctionData:He,encodeFunctionResult:Ur,encodePacked:nu,erc1155Abi:Hr,erc20Abi:Fr,erc20Abi_bytes32:$r,erc4626Abi:Gr,erc721Abi:Vr,ethAddress:zr,etherUnits:zt,extractChain:eu,fallback:id,formatBlock:Wr,formatEther:Kr,formatGwei:Jr,formatLog:Yr,formatTransaction:Qr,formatTransactionReceipt:Xr,formatTransactionRequest:$e,formatUnits:Zr,fromBlobs:wd,fromBytes:eo,fromHex:to,fromRlp:Ke,getAbiItem:so,getAddress:O,getChainContractAddress:no,getContract:od,getContractAddress:au,getContractError:ss,getCreate2Address:ps,getCreateAddress:gs,getEventSelector:tt,getEventSignature:re,getFunctionSelector:st,getFunctionSignature:re,getSerializedTransactionType:Es,getTransactionType:ao,getTypesForEIP712Domain:Zt,gweiUnits:Wt,hashDomain:ro,hashMessage:qt,hashStruct:oo,hashTypedData:Ot,hexToBigInt:C,hexToBool:io,hexToBytes:Q,hexToCompactSignature:ct,hexToNumber:A,hexToRlp:co,hexToSignature:ut,hexToString:uo,http:lo,isAddress:je,isAddressEqual:Z,isBytes:qe,isErc6492Signature:Nt,isHash:bs,isHex:E,keccak256:Y,labelhash:fo,maxInt104:ho,maxInt112:mo,maxInt120:go,maxInt128:po,maxInt136:yo,maxInt144:bo,maxInt152:wo,maxInt16:_o,maxInt160:Eo,maxInt168:vo,maxInt176:xo,maxInt184:To,maxInt192:So,maxInt200:Co,maxInt208:Io,maxInt216:Po,maxInt224:Ao,maxInt232:Ro,maxInt24:ko,maxInt240:Bo,maxInt248:Mo,maxInt256:Lo,maxInt32:qo,maxInt40:Oo,maxInt48:No,maxInt56:jo,maxInt64:Do,maxInt72:Uo,maxInt8:Ho,maxInt80:Fo,maxInt88:$o,maxInt96:Go,maxUint104:Vo,maxUint112:zo,maxUint120:Wo,maxUint128:Ko,maxUint136:Jo,maxUint144:Yo,maxUint152:Qo,maxUint16:Xo,maxUint160:Zo,maxUint168:ei,maxUint176:ti,maxUint184:si,maxUint192:ni,maxUint200:ai,maxUint208:ri,maxUint216:oi,maxUint224:ii,maxUint232:ci,maxUint24:ui,maxUint240:di,maxUint248:li,maxUint256:fi,maxUint32:hi,maxUint40:mi,maxUint48:gi,maxUint56:pi,maxUint64:yi,maxUint72:bi,maxUint8:wi,maxUint80:_i,maxUint88:Ei,maxUint96:vi,minInt104:xi,minInt112:Ti,minInt120:Si,minInt128:Ci,minInt136:Ii,minInt144:Pi,minInt152:Ai,minInt16:Ri,minInt160:ki,minInt168:Bi,minInt176:Mi,minInt184:Li,minInt192:qi,minInt200:Oi,minInt208:Ni,minInt216:ji,minInt224:Di,minInt232:Ui,minInt24:Hi,minInt240:Fi,minInt248:$i,minInt256:Gi,minInt32:Vi,minInt40:zi,minInt48:Wi,minInt56:Ki,minInt64:Ji,minInt72:Yi,minInt8:Qi,minInt80:Xi,minInt88:Zi,minInt96:ec,multicall3Abi:tc,namehash:sc,nonceManager:_u,numberToBytes:nc,numberToHex:S,offchainLookup:Mc,offchainLookupAbiItem:Lc,offchainLookupSignature:qc,pad:K,padBytes:ac,padHex:Me,parseAbi:rc,parseAbiItem:oc,parseAbiParameter:Dc,parseAbiParameters:Uc,parseCompactSignature:ct,parseErc6492Signature:du,parseEther:yu,parseEventLogs:ic,parseGwei:bu,parseSignature:ut,parseTransaction:vs,parseUnits:Je,prepareEncodeFunctionData:cc,presignMessagePrefix:uc,publicActions:os,recoverAddress:X,recoverMessageAddress:ws,recoverPublicKey:dc,recoverTransactionAddress:pd,recoverTypedDataAddress:_s,ripemd160:ou,rpcSchema:lc,rpcTransactionType:fc,serializeAccessList:hc,serializeCompactSignature:dt,serializeErc6492Signature:mc,serializeSignature:nt,serializeTransaction:ds,serializeTypedData:ts,setErrorConfig:gc,setupKzg:_d,sha256:pc,shouldThrow:As,sidecarsToVersionedHashes:bd,signatureToCompactSignature:yd,signatureToHex:nt,size:Mt,slice:At,sliceBytes:yc,sliceHex:jt,stringToBytes:bc,stringToHex:St,stringify:Yt,testActions:Rs,toBlobSidecars:Ft,toBlobs:wc,toBytes:j,toEventHash:at,toEventSelector:tt,toEventSignature:re,toFunctionHash:at,toFunctionSelector:st,toFunctionSignature:re,toHex:Lt,toPrefixedMessage:_c,toRlp:kt,transactionType:Ec,trim:Vt,universalSignatureValidatorAbi:vc,universalSignatureValidatorByteCode:xc,validateTypedData:es,verifyHash:iu,verifyMessage:cu,verifyTypedData:uu,walletActions:ks,webSocket:fd,weiUnits:Tc,withCache:Sc,withRetry:Cc,withTimeout:vt,zeroAddress:Ic,zeroHash:Pc},Symbol.toStringTag,{value:"Module"}));var Ye={},we={},Ms={},me={},Ls={},te={},se={};Object.defineProperty(se,"__esModule",{value:!0});se.getSDKVersion=void 0;const vd=()=>"9.1.0";se.getSDKVersion=vd;var _e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.generateRequestId=void 0;const xd=e=>e.toString(16).padStart(2,"0"),Td=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,xd).join("")},Sd=()=>typeof window<"u"?Td(10):new Date().getTime().toString(36);_e.generateRequestId=Sd;Object.defineProperty(te,"__esModule",{value:!0});te.MessageFormatter=void 0;const Cd=se,Id=_e;class Ee{}te.MessageFormatter=Ee;Ee.makeRequest=(e,t)=>({id:(0,Id.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,Cd.getSDKVersion)()}});Ee.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t});Ee.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n});var M={};Object.defineProperty(M,"__esModule",{value:!0});M.RestrictedMethods=M.Methods=void 0;var lt;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(lt||(M.Methods=lt={}));var ft;(function(e){e.requestAddressBook="requestAddressBook"})(ft||(M.RestrictedMethods=ft={}));(function(e){var t=I&&I.__createBinding||(Object.create?function(r,i,c,u){u===void 0&&(u=c);var o=Object.getOwnPropertyDescriptor(i,c);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[c]}}),Object.defineProperty(r,u,o)}:function(r,i,c,u){u===void 0&&(u=c),r[u]=i[c]}),n=I&&I.__exportStar||function(r,i){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(i,c)&&t(i,r,c)};Object.defineProperty(e,"__esModule",{value:!0});const s=te;class a{constructor(i=null,c=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:u,data:o,source:l})=>{const g=!o,h=!this.isServer&&l===window.parent,d=typeof o.version<"u"&&parseInt(o.version.split(".")[0]),m=typeof d=="number"&&d>=1;let f=!0;return Array.isArray(this.allowedOrigins)&&(f=this.allowedOrigins.find(p=>p.test(u))!==void 0),!g&&h&&m&&f},this.logIncomingMessage=u=>{console.info(`Safe Apps SDK v1: A message was received from origin ${u.origin}. `,u.data)},this.onParentMessage=u=>{this.isValidMessage(u)&&(this.debugMode&&this.logIncomingMessage(u),this.handleIncomingMessage(u.data))},this.handleIncomingMessage=u=>{const{id:o}=u,l=this.callbacks.get(o);l&&(l(u),this.callbacks.delete(o))},this.send=(u,o)=>{const l=s.MessageFormatter.makeRequest(u,o);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((g,h)=>{this.callbacks.set(l.id,d=>{if(!d.success){h(new Error(d.error));return}g(d)})})},this.allowedOrigins=i,this.debugMode=c,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=a,n(M,e)})(Ls);var ve={},xe={},Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.isObjectEIP712TypedData=void 0;const Pd=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;Te.isObjectEIP712TypedData=Pd;var qs={};Object.defineProperty(qs,"__esModule",{value:!0});var Os={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=Bc;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(Os);var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});(function(e){var t=I&&I.__createBinding||(Object.create?function(s,a,r,i){i===void 0&&(i=r);var c=Object.getOwnPropertyDescriptor(a,r);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(s,i,c)}:function(s,a,r,i){i===void 0&&(i=r),s[i]=a[r]}),n=I&&I.__exportStar||function(s,a){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(a,r)&&t(a,s,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Te,e),n(qs,e),n(Os,e),n(Ns,e)})(xe);Object.defineProperty(ve,"__esModule",{value:!0});ve.TXs=void 0;const ce=M,Ad=xe;class Rd{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(ce.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const n={message:t};return(await this.communicator.send(ce.Methods.signMessage,n)).data}async signTypedMessage(t){if(!(0,Ad.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(ce.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:n}){if(!t||!t.length)throw new Error("No transactions were passed");const s={txs:t,params:n};return(await this.communicator.send(ce.Methods.sendTransactions,s)).data}}ve.TXs=Rd;var Se={},W={};Object.defineProperty(W,"__esModule",{value:!0});W.RPC_CALLS=void 0;W.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Se,"__esModule",{value:!0});Se.Eth=void 0;const R=W,kd=M,q={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Bd{constructor(t){this.communicator=t,this.call=this.buildRequest({call:R.RPC_CALLS.eth_call,formatters:[null,q.defaultBlockParam]}),this.getBalance=this.buildRequest({call:R.RPC_CALLS.eth_getBalance,formatters:[null,q.defaultBlockParam]}),this.getCode=this.buildRequest({call:R.RPC_CALLS.eth_getCode,formatters:[null,q.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:R.RPC_CALLS.eth_getStorageAt,formatters:[null,q.blockNumberToHex,q.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:R.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:R.RPC_CALLS.eth_getBlockByHash,formatters:[null,q.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:R.RPC_CALLS.eth_getBlockByNumber,formatters:[q.blockNumberToHex,q.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:R.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:R.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:R.RPC_CALLS.eth_getTransactionCount,formatters:[null,q.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:R.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:R.RPC_CALLS.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:R.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:n,formatters:s}=t;return async a=>{s&&Array.isArray(a)&&s.forEach((c,u)=>{c&&(a[u]=c(a[u]))});const r={call:n,params:a||[]};return(await this.communicator.send(kd.Methods.rpcCall,r)).data}}}Se.Eth=Bd;var Ce={};const Md=Ac(Ed);var $={};Object.defineProperty($,"__esModule",{value:!0});$.MAGIC_VALUE_BYTES=$.MAGIC_VALUE=void 0;const Ld="0x1626ba7e";$.MAGIC_VALUE=Ld;const qd="0x20c13b0b";$.MAGIC_VALUE_BYTES=qd;var Qe={},ne={},U={};Object.defineProperty(U,"__esModule",{value:!0});U.PermissionsError=U.PERMISSIONS_REQUEST_REJECTED=void 0;U.PERMISSIONS_REQUEST_REJECTED=4001;class Xe extends Error{constructor(t,n,s){super(t),this.code=n,this.data=s,Object.setPrototypeOf(this,Xe.prototype)}}U.PermissionsError=Xe;Object.defineProperty(ne,"__esModule",{value:!0});ne.Wallet=void 0;const Re=M,ue=U;class Od{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(Re.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new ue.PermissionsError("Permissions request is invalid",ue.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(Re.Methods.wallet_requestPermissions,t)).data}catch{throw new ue.PermissionsError("Permissions rejected",ue.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(n=>typeof n=="object"?Object.keys(n).every(s=>!!Object.values(Re.RestrictedMethods).includes(s)):!1)}}ne.Wallet=Od;Object.defineProperty(Qe,"__esModule",{value:!0});const Nd=ne,ht=U,mt=(e,t)=>t.some(n=>n.parentCapability===e),jd=()=>(e,t,n)=>{const s=n.value;return n.value=async function(){const a=new Nd.Wallet(this.communicator);let r=await a.getPermissions();if(mt(t,r)||(r=await a.requestPermissions([{[t]:{}}])),!mt(t,r))throw new ht.PermissionsError("Permissions rejected",ht.PERMISSIONS_REQUEST_REJECTED);return s.apply(this)},n};Qe.default=jd;var Dd=I&&I.__decorate||function(e,t,n,s){var a=arguments.length,r=a<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,n,s);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Ud=I&&I.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.Safe=void 0;const de=Md,gt=$,N=M,pt=W,Hd=xe,Fd=Ud(Qe);class js{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(N.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(N.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(N.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,n="0x"){const s=await this.getInfo(),a=(0,de.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:pt.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(N.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===gt.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,n="0x"){const s=await this.getInfo(),a=(0,de.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:pt.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(N.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===gt.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,de.hashMessage)(t)}calculateTypedMessageHash(t){const n=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let s=t.primaryType;if(!s){const a=Object.values(t.types),r=Object.keys(t.types).filter(i=>a.every(c=>c.every(({type:u})=>u.replace("[","").replace("]","")!==i)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");s=r[0]}return(0,de.hashTypedData)({message:t.message,domain:{...t.domain,chainId:n,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:s})}async getOffChainSignature(t){return(await this.communicator.send(N.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,n="0x"){let s;if(typeof t=="string"&&(s=async()=>{const a=this.calculateMessageHash(t);return await this.isMessageHashSigned(a,n)}),(0,Hd.isObjectEIP712TypedData)(t)&&(s=async()=>{const a=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(a,n)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(t,n="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const a of s)if(await a(t,n))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(N.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(N.Methods.requestAddressBook,void 0)).data}}Ce.Safe=js;Dd([(0,Fd.default)()],js.prototype,"requestAddressBook",null);var $d=I&&I.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(me,"__esModule",{value:!0});const Gd=$d(Ls),Vd=ve,zd=Se,Wd=Ce,Kd=ne;class Jd{constructor(t={}){const{allowedDomains:n=null,debug:s=!1}=t;this.communicator=new Gd.default(n,s),this.eth=new zd.Eth(this.communicator),this.txs=new Vd.TXs(this.communicator),this.safe=new Wd.Safe(this.communicator),this.wallet=new Kd.Wallet(this.communicator)}}me.default=Jd;(function(e){var t=I&&I.__createBinding||(Object.create?function(i,c,u,o){o===void 0&&(o=u);var l=Object.getOwnPropertyDescriptor(c,u);(!l||("get"in l?!c.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(i,o,l)}:function(i,c,u,o){o===void 0&&(o=u),i[o]=c[u]}),n=I&&I.__exportStar||function(i,c){for(var u in i)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&t(c,i,u)},s=I&&I.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const a=s(me);e.default=a.default,n(me,e),n(xe,e),n(M,e),n(te,e);var r=se;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),n(W,e)})(Ms);var G={};Object.defineProperty(G,"__esModule",{value:!0});G.numberToHex=G.getLowerCase=void 0;function Yd(e){return e&&e.toLowerCase()}G.getLowerCase=Yd;function Qd(e){return`0x${e.toString(16)}`}G.numberToHex=Qd;Object.defineProperty(we,"__esModule",{value:!0});we.SafeAppProvider=void 0;const H=Ms,Xd=Rc,k=G;class Zd extends Xd.EventEmitter{constructor(t,n){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=n}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var a,r,i,c;const{method:n,params:s=[]}=t;switch(n){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,k.numberToHex)(this.chainId);case"personal_sign":{const[h,d]=s;if(this.safe.safeAddress.toLowerCase()!==d.toLowerCase())throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(h);return("signature"in m?m.signature:void 0)||"0x"}case"eth_sign":{const[h,d]=s;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!d.startsWith("0x"))throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(d);return("signature"in m?m.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,d]=s,m=typeof d=="string"?JSON.parse(d):d;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const f=await this.sdk.txs.signTypedMessage(m);return("signature"in f?f.signature:void 0)||"0x"}case"eth_sendTransaction":const u={...s[0],value:s[0].value||"0",data:s[0].data||"0x"};typeof u.gas=="string"&&u.gas.startsWith("0x")&&(u.gas=parseInt(u.gas,16));const o=await this.sdk.txs.send({txs:[u],params:{safeTxGas:u.gas}});return this.submittedTxs.set(o.safeTxHash,{from:this.safe.safeAddress,hash:o.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:u.data,value:u.value,to:u.to,blockHash:null,blockNumber:null,transactionIndex:null}),o.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,k.getLowerCase)(s[0]),s[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,k.getLowerCase)(s[0]),s[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,k.getLowerCase)(s[0]),s[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,k.getLowerCase)(s[0]),s[1],s[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([s[0],s[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([s[0],s[1]]);case"eth_getTransactionByHash":let g=s[0];try{g=(await this.sdk.txs.getBySafeTxHash(g)).txHash||g}catch{}return this.submittedTxs.has(g)?this.submittedTxs.get(g):this.sdk.eth.getTransactionByHash([g]).then(h=>(h&&(h.hash=s[0]),h));case"eth_getTransactionReceipt":{let h=s[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(d=>(d&&(d.transactionHash=s[0]),d))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(s[0]);case"eth_call":return this.sdk.eth.call([s[0],s[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([s[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(s[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([s[0]]);case"wallet_sendCalls":{const{from:h,calls:d,chainId:m}=s[0];if(m!==(0,k.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${m}`);if(h!==this.safe.safeAddress)throw Error("Invalid from address");const f=d.map((b,x)=>{if(!b.to)throw new Error(`Invalid call #${x}: missing "to" field`);return{to:b.to,data:b.data??"0x",value:b.value??(0,k.numberToHex)(0)}}),{safeTxHash:p}=await this.sdk.txs.send({txs:f});return{id:p}}case"wallet_getCallsStatus":{const h=s[0],d={[H.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[H.TransactionStatus.AWAITING_EXECUTION]:100,[H.TransactionStatus.SUCCESS]:200,[H.TransactionStatus.CANCELLED]:400,[H.TransactionStatus.FAILED]:500},m=await this.sdk.txs.getBySafeTxHash(h),f={version:"1.0",id:h,chainId:(0,k.numberToHex)(this.chainId),status:d[m.txStatus]};if(!m.txHash)return f;const p=await this.sdk.eth.getTransactionReceipt([m.txHash]);if(!p)return f;const v=((r=(a=m.txData)==null?void 0:a.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((c=(i=m.txData.dataDecoded.parameters)==null?void 0:i[0].valueDecoded)==null?void 0:c.length)??1,b=Number(p.blockNumber),x=Number(p.gasUsed);return f.receipts=Array(v).fill({logs:p.logs,status:(0,k.numberToHex)(m.txStatus===H.TransactionStatus.SUCCESS?1:0),blockHash:p.blockHash,blockNumber:(0,k.numberToHex)(b),gasUsed:(0,k.numberToHex)(x),transactionHash:m.txHash}),f}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,k.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,n){t||n("Undefined request"),this.request(t).then(s=>n(null,{jsonrpc:"2.0",id:t.id,result:s})).catch(s=>n(s,null))}}we.SafeAppProvider=Zd;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=we;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(Ye);const el=kc(Ye),al=Oc({__proto__:null,default:el},[Ye]);export{al as i};
